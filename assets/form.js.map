{"version":3,"sources":["form.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","resetMessages","document","querySelectorAll","forEach","field","classList","remove","addEventListener","testimonialForm","getElementById","preventDefault","data","name","querySelector","value","email","message","test","String","toLowerCase","url","dataset","params","URLSearchParams","FormData","add","fetch","method","body","then","res","json","catch","error","response"],"mappings":"CAAY,SAASA,EAAEC,EAAEC,EAAEC,GAAG,SAASC,EAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,IAAIE,EAAkB,mBAATC,SAAqBA,QAAQ,IAAIF,GAAGC,EAAE,OAAOA,EAAEF,GAAE,GAAI,GAAGI,EAAE,OAAOA,EAAEJ,GAAE,GAAI,IAAIK,EAAE,IAAIC,MAAM,uBAAuBN,EAAE,KAAK,MAAMK,EAAEE,KAAK,mBAAmBF,EAAE,IAAIG,EAAEX,EAAEG,IAAIS,YAAYb,EAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAG,IAAIE,EAAED,EAAEI,GAAG,GAAGL,GAAG,OAAOI,EAAEF,GAAIF,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,OAAOD,EAAEG,GAAGS,QAAkD,IAA1C,IAAIL,EAAkB,mBAATD,SAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,IAAI,OAAOD,EAAlc,EAAkda,GAAG,SAAST,EAAQU,EAAOJ,GAC7e,aAyDA,SAASK,IACPC,SAASC,iBAAiB,cAAcC,QAAQ,SAAUC,GACxD,OAAOA,EAAMC,UAAUC,OAAO,UAxDlCL,SAASM,iBAAiB,mBAAoB,SAAU1B,GACtD,IAAI2B,EAAkBP,SAASQ,eAAe,wBAE9CD,EAAgBD,iBAAiB,SAAU,SAAU1B,GACnDA,EAAE6B,iBAGFV,IAGA,IAAIW,GACFC,KAAMJ,EAAgBK,cAAc,iBAAiBC,MACrDC,MAAOP,EAAgBK,cAAc,kBAAkBC,MACvDE,QAASR,EAAgBK,cAAc,oBAAoBC,OAG3D,GAAKH,EAAKC,KAKZ,GAwCO,0JACCK,KAAKC,OAzCMP,EAAKI,OAyCGI,eApC3B,GAAKR,EAAKK,QAAV,CAMA,IAAII,EAAMZ,EAAgBa,QAAQD,IAG9BE,EAAS,IAAIC,gBAAgB,IAAIC,SAAShB,IAE9CA,EAAgBK,cAAc,uBAAuBR,UAAUoB,IAAI,QAEnEC,MAAMN,GACJO,OAAQ,OACRC,KAAMN,IACLO,KAAK,SAAUC,GAChB,OAAOA,EAAIC,SACVC,MAAM,SAAUC,GACjBjC,IACAQ,EAAgBK,cAAc,kBAAkBR,UAAUoB,IAAI,UAC7DI,KAAK,SAAUK,GAChBlC,WArBAQ,EAAgBK,cAAc,iCAAiCR,UAAUoB,IAAI,aAL7EjB,EAAgBK,cAAc,+BAA+BR,UAAUoB,IAAI,aAL3EjB,EAAgBK,cAAc,8BAA8BR,UAAUoB,IAAI,sBAgDrE","file":"form.js","sourcesContent":["(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()({1:[function(require,module,exports){\n'use strict';\n\n// DOMContentLoaded is a default DOM event which targets the whole DOM\ndocument.addEventListener('DOMContentLoaded', function (e) {\n  var testimonialForm = document.getElementById('max-testimonial-form');\n\n  testimonialForm.addEventListener('submit', function (e) {\n    e.preventDefault();\n\n    // reset the form messages\n    resetMessages();\n\n    // collect all the data\n    var data = {\n      name: testimonialForm.querySelector('[name=\"name\"]').value,\n      email: testimonialForm.querySelector('[name=\"email\"]').value,\n      message: testimonialForm.querySelector('[name=\"message\"]').value\n\n      // validate everything\n    };if (!data.name) {\n      testimonialForm.querySelector('[data-error=\"invalidName\"]').classList.add('show');\n      return;\n    }\n\n    if (!validateEmail(data.email)) {\n      testimonialForm.querySelector('[data-error=\"invalidEmail\"]').classList.add('show');\n      return;\n    }\n\n    if (!data.message) {\n      testimonialForm.querySelector('[data-error=\"invalidMessage\"]').classList.add('show');\n      return;\n    }\n\n    // ajax http post request\n    var url = testimonialForm.dataset.url;\n    // First bundle the testimonialForm with URLSearchParams so the form is accessible to WordPress\n    // FormData - Default JavaScript class for using HTTP requests and other form-related options\n    var params = new URLSearchParams(new FormData(testimonialForm));\n\n    testimonialForm.querySelector('.js-form-submission').classList.add('show');\n\n    fetch(url, {\n      method: \"POST\",\n      body: params\n    }).then(function (res) {\n      return res.json();\n    }).catch(function (error) {\n      resetMessages();\n      testimonialForm.querySelector('.js-form-error').classList.add('show');\n    }).then(function (response) {\n      resetMessages();\n      // deal with the response\n    });\n  });\n});\n\nfunction resetMessages() {\n  document.querySelectorAll('.field-msg').forEach(function (field) {\n    return field.classList.remove('show');\n  });\n}\n\nfunction validateEmail(email) {\n  var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return re.test(String(email).toLowerCase());\n}\n\n},{}]},{},[1]);\n"]}